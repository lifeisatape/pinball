–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –∏–∑ –ª–æ–≥–æ–≤:

window.farcasterManager.isInFrame is not a function - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥
Not in Farcaster Mini App environment - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–µ–¥—ã
–ü—Ä–æ–±–ª–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ - FarcasterManager —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ SDK

üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ:
–®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤—å—Ç–µ game/PinballGame.js
–ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 446 –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è isInFrame() –Ω–∞ isFrameEnvironment:
javascript// –ë–´–õ–û (—Å—Ç—Ä–æ–∫–∞ 446):
if (window.farcasterManager && window.farcasterManager.isInFrame()) {

// –î–û–õ–ñ–ù–û –ë–´–¢–¨:
if (window.farcasterManager && window.farcasterManager.isFrameEnvironment) {
–®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤—å—Ç–µ index.html - –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
–ó–∞–º–µ–Ω–∏—Ç–µ —Å–µ–∫—Ü–∏—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ü–µ index.html:
javascriptwindow.addEventListener('load', async () => {
    console.log('üéÆ Page loaded, waiting for SDK...');
    
    // –°–Ω–∞—á–∞–ª–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ä–µ–¥—É
    console.log('üîç Detecting Mini App environment...');
    window.isMiniApp = window.sdk?.isInMiniApp?.() || false;
    
    if (window.isMiniApp && window.sdk) {
        console.log('üì¶ Farcaster SDK loaded');
        console.log('üöÄ Calling ready() immediately...');
        
        try {
            await window.sdk.actions.ready();
            console.log('‚úÖ Ready() called successfully');
        } catch (error) {
            console.error('‚ùå Ready() failed:', error);
        }
        
        // –°–û–ó–î–ê–ï–ú FarcasterManager –¢–û–õ–¨–ö–û –ü–û–°–õ–ï –∑–∞–≥—Ä—É–∑–∫–∏ SDK
        if (typeof FarcasterManager !== 'undefined') {
            window.farcasterManager = new FarcasterManager();
            console.log('‚úÖ FarcasterManager created');
        }
        
        console.log('üéÆ Initializing Mini App game...');
        const game = new PinballGame();
    } else {
        console.log('üéÆ Initializing regular game...');
        
        // –í –æ–±—ã—á–Ω–æ–π —Å—Ä–µ–¥–µ —Å–æ–∑–¥–∞–µ–º –∑–∞–≥–ª—É—à–∫—É
        window.farcasterManager = {
            isFrameEnvironment: false,
            isReady: false,
            sendDonation: () => ({ success: false, reason: 'not_in_miniapp' }),
            shareScore: () => {},
            addToFavorites: () => false
        };
        
        const game = new PinballGame();
    }
});
–®–∞–≥ 3: –ò—Å–ø—Ä–∞–≤—å—Ç–µ ui/GameOverOverlay.js
–û–±–Ω–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥ handleDonate():
javascriptasync handleDonate() {
    if (!window.farcasterManager) {
        console.warn('FarcasterManager not available');
        this.showNotification('Donation not available in this environment', 'error');
        return;
    }
    
    if (!window.farcasterManager.isFrameEnvironment) {
        console.warn('Not in Farcaster Mini App environment');
        this.showNotification('Donations only available in Farcaster app', 'error');
        return;
    }

    // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ handleDonate() –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
}
–û–±–Ω–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥ showFarcasterButtons():
javascriptshowFarcasterButtons() {
    if (window.isMiniApp && window.farcasterManager?.isFrameEnvironment && this.farcasterActions) {
        this.farcasterActions.style.display = 'flex';
        console.log('‚úÖ Farcaster action buttons shown');
    } else {
        console.log('‚ÑπÔ∏è Farcaster buttons hidden - not in Mini App or manager not ready');
    }
}
–®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
javascript// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
function debugFarcaster() {
    console.log('=== FARCASTER DEBUG ===');
    console.log('window.isMiniApp:', window.isMiniApp);
    console.log('window.sdk:', !!window.sdk);
    console.log('window.farcasterManager:', !!window.farcasterManager);
    
    if (window.farcasterManager) {
        console.log('isFrameEnvironment:', window.farcasterManager.isFrameEnvironment);
        console.log('isReady:', window.farcasterManager.isReady);
        console.log('SDK available:', !!window.farcasterManager.sdk);
    }
}

debugFarcaster();
‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç
–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

‚úÖ FarcasterManager —Å–æ–∑–¥–∞–µ—Ç—Å—è –ü–û–°–õ–ï –∑–∞–≥—Ä—É–∑–∫–∏ SDK
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è Mini App —Å—Ä–µ–¥–∞
‚úÖ –ö–Ω–æ–ø–∫–∞ –¥–æ–Ω–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Farcaster
‚úÖ Graceful fallback –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –ø–æ—Ä—è–¥–∫–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ - FarcasterManager —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ SDK, –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ isInFrame –≤–º–µ—Å—Ç–æ isFrameEnvironment.