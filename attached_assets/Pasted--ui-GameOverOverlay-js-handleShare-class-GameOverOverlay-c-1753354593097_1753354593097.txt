/ –í —Ñ–∞–π–ª–µ ui/GameOverOverlay.js
// –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –º–µ—Ç–æ–¥ handleShare()

class GameOverOverlay {
    constructor() {
        this.overlay = document.getElementById('gameOverOverlay');
        this.scoreElement = document.getElementById('finalScore');
        this.highScoreElement = document.getElementById('finalHighScore');

        // üéØ –ù–û–í–´–ï –≠–õ–ï–ú–ï–ù–¢–´
        this.farcasterActions = document.getElementById('farcasterActions');
        this.shareButton = document.getElementById('shareScoreBtn');
        this.donateButton = document.getElementById('donateBtn');
        this.addToAppsButton = document.getElementById('addToAppsBtn');

        // ‚úÖ –î–û–ë–ê–í–õ–Ø–ï–ú: –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ gameState
        this.currentGameState = null;

        this.setupEventListeners();
    }

    // ‚úÖ –û–ë–ù–û–í–õ–Ø–ï–ú: –°–æ—Ö—Ä–∞–Ω—è–µ–º gameState –ø—Ä–∏ –ø–æ–∫–∞–∑–µ overlay
    show(gameState) {
        if (!this.overlay) return;

        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –°–æ—Ö—Ä–∞–Ω—è–µ–º gameState –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ handleShare
        this.currentGameState = gameState;

        this.overlay.style.display = 'flex';

        if (this.scoreElement) {
            this.scoreElement.textContent = gameState.score.toLocaleString();
        }

        if (this.highScoreElement) {
            this.highScoreElement.textContent = gameState.highScore.toLocaleString();
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º Farcaster –∫–Ω–æ–ø–∫–∏ —Ç–æ–ª—å–∫–æ –≤ Mini App —Å—Ä–µ–¥–µ
        this.showFarcasterButtons();
    }

    // ‚úÖ –ò–°–ü–†–ê–í–õ–Ø–ï–ú: –ü–µ—Ä–µ–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ shareScore
    async handleShare() {
        if (!window.farcasterManager || !window.farcasterManager.isFrameEnvironment) {
            this.showNotification('Sharing only available in Farcaster Mini App', 'error');
            return;
        }

        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–µ—Ä–µ–¥–∞–µ–º —Å—á–µ—Ç –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è
        if (this.currentGameState) {
            await window.farcasterManager.shareScore(
                this.currentGameState.score, 
                this.currentGameState.currentLevelName
            );
        } else {
            // Fallback: –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ –∏–∑ PinballGame
            if (window.game && window.game.shareScore) {
                await window.game.shareScore();
            }
        }
    }

    // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
    async handleDonate() {
        // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –¥–æ–Ω–∞—Ç–∞
    }

    async handleAddToFavorites() {
        // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    }

    showNotification(message, type = 'info') {
        // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    }

    hide() {
        if (this.overlay) {
            this.overlay.style.display = 'none';
        }
    }
}