üéØ –¶–ï–õ–¨
–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–∞–±–æ—á—É—é –ª–æ–≥–∏–∫—É Farcaster Mini App –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ FlowersOnMars –≤ –ø—Ä–æ–µ–∫—Ç Pinball –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ iPhone).
üìã –ó–ê–î–ê–ß–ò –î–õ–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø
1. –û–ë–ù–û–í–ò–¢–¨ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï MINI APP –í INDEX.HTML
javascript// –ó–ê–ú–ï–ù–ò–¢–¨ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô –ö–û–î –ù–ê:
window.isMiniApp = window.parent !== window || 
                  window.location.search.includes('frame=true') ||
                  window.location.search.includes('miniApp=true') ||
                  document.referrer.includes('warpcast.com') ||
                  document.referrer.includes('farcaster') ||
                  // ‚úÖ –î–û–ë–ê–í–ò–¢–¨ –≠–¢–ò –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò:
                  navigator.userAgent.includes('Warpcast') ||
                  navigator.userAgent.includes('Farcaster');
2. –ü–ï–†–ï–ü–ò–°–ê–¢–¨ FARCASTERMANAGER.JS –ü–û –û–ë–†–ê–ó–¶–£ FARCASTERINTEGRATION.JS
–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
A. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä - —É–ø—Ä–æ—Å—Ç–∏—Ç—å
javascriptconstructor() {
    this.sdk = null;
    this.context = null;
    this.isInMiniApp = false;
    this.isFarcasterApp = false;
    // –£–±—Ä–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ callbacks, —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—â–µ
}
B. –ú–µ—Ç–æ–¥ init() - –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∏–∑ FlowersOnMars
javascriptasync init() {
    // –¢–æ—á–Ω–æ —Ç–∞–∫–∞—è –∂–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∫ –≤ FlowersOnMars
    if (!window.isMiniApp) {
        console.log('‚è≠Ô∏è Not in Mini App environment, skipping Farcaster initialization');
        return; // –ù–ï –≤—ã–∑—ã–≤–∞—Ç—å simulateReady()
    }

    try {
        const sdk = await this.waitForSDK();
        this.sdk = sdk;

        // –£–ü–†–û–©–ï–ù–ù–ê–Ø –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∫–∞–∫ –≤ FlowersOnMars)
        let isInMiniAppEnv = true;
        try {
            if (typeof sdk.isInMiniApp === 'function') {
                isInMiniAppEnv = await sdk.isInMiniApp();
            }
        } catch (error) {
            console.log('‚ö†Ô∏è Could not verify environment with SDK:', error);
        }

        if (isInMiniAppEnv) {
            this.isInMiniApp = true;
            this.isFarcasterApp = true;
            
            // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
            this.context = await sdk.context;
            
            // –í—ã–∑–≤–∞—Ç—å setupMiniAppFeatures (–ë–ï–ó ready() –≤–Ω—É—Ç—Ä–∏)
            await this.setupMiniAppFeatures();
        }
    } catch (error) {
        console.error('‚ùå Error initializing Farcaster SDK:', error);
        this.isInMiniApp = false;
    }
}
C. –ú–µ—Ç–æ–¥ setupMiniAppFeatures() - —Ç–æ—á–Ω–∞—è –∫–æ–ø–∏—è –∏–∑ FlowersOnMars
javascriptasync setupMiniAppFeatures() {
    try {
        // –ñ–¥–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ UI –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º ready()
        await new Promise(resolve => {
            requestAnimationFrame(() => {
                setTimeout(resolve, 500); // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
            });
        });
        console.log('üéâ Mini App features setup complete');
    } catch (error) {
        console.error('Error setting up Mini App features:', error);
    }
}
D. –ú–µ—Ç–æ–¥ notifyAppReady() - —Ç–æ—á–Ω–∞—è –∫–æ–ø–∏—è –∏–∑ FlowersOnMars
javascriptasync notifyAppReady() {
    if (this.isInMiniApp && this.sdk && this.sdk.actions && this.sdk.actions.ready) {
        try {
            await this.sdk.actions.ready({
                disableNativeGestures: false
            });
            console.log('üéâ Farcaster splash screen dismissed');
        } catch (error) {
            console.error('‚ùå Failed to dismiss splash screen:', error);
        }
    }
}
3. –û–ë–ù–û–í–ò–¢–¨ –í–´–ó–û–í–´ –í PINBALLGAME.JS
–ù–∞–π—Ç–∏ –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è FarcasterManager –∏ –∏–∑–º–µ–Ω–∏—Ç—å:
javascript// –°–¢–ê–†–´–ô –ö–û–î:
window.farcasterManager.onReady((context) => {
    // –ª–æ–≥–∏–∫–∞
});

// –ù–û–í–´–ô –ö–û–î (–∫–∞–∫ –≤ FlowersOnMars):
if (window.farcasterIntegration && window.farcasterIntegration.isFarcasterApp) {
    // –ª–æ–≥–∏–∫–∞
    // –í—ã–∑–≤–∞—Ç—å ready() –í–†–£–ß–ù–£–Æ –∫–æ–≥–¥–∞ –∏–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞:
    await window.farcasterIntegration.notifyAppReady();
}
4. –ü–ï–†–ï–ò–ú–ï–ù–û–í–ê–¢–¨ –ú–ï–¢–û–î–´ –ü–û –û–ë–†–ê–ó–¶–£ FLOWERSONMARS
javascript// –°–¢–ê–†–´–ï –ú–ï–¢–û–î–´ ‚Üí –ù–û–í–´–ï –ú–ï–¢–û–î–´
isInFrame() ‚Üí isInMiniApp (—Å–≤–æ–π—Å—Ç–≤–æ)
addToFavorites() ‚Üí –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å
shareScore() ‚Üí —Ç–æ—á–Ω–∞—è –∫–æ–ø–∏—è –∏–∑ FlowersOnMars
getUserInfo() ‚Üí –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –∏–∑ FlowersOnMars
sendDonation() ‚Üí —Ç–æ—á–Ω–∞—è –∫–æ–ø–∏—è –∏–∑ FlowersOnMars
5. –û–ë–ù–û–í–ò–¢–¨ –ì–õ–û–ë–ê–õ–¨–ù–£–Æ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Æ
–í –∫–æ–Ω—Ü–µ FarcasterManager.js:
javascript// –ó–ê–ú–ï–ù–ò–¢–¨:
window.farcasterManager = new FarcasterManager();

// –ù–ê:
window.farcasterIntegration = new FarcasterManager(); // –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å –≤ FarcasterIntegration
6. –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• –£–°–¢–†–û–ô–°–¢–í
A. –í HTML –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞-—Ç–µ–≥–∏ –∏–∑ FlowersOnMars:
html<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
B. –£–±—Ä–∞—Ç—å –∏–∑ FarcasterManager:

–°–ª–æ–∂–Ω—ã–µ callbacks —Å–∏—Å—Ç–µ–º—ã
simulateReady() –≤—ã–∑–æ–≤—ã
–ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

C. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
javascriptconsole.log(window.isMiniApp ? 'üöÄ Running in Farcaster Mini App mode' : 'üåê Running in regular web mode');
üö® –í–ê–ñ–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´ –ò–ó FLOWERSONMARS

–ù–ï –≤—ã–∑—ã–≤–∞—Ç—å ready() –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ - —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ notifyAppReady() –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ
–ù–ï –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö
–ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–∞ - –º–∏–Ω–∏–º—É–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
–ü—Ä–æ–≤–µ—Ä–∫–∞ User Agent –¥–ª—è Warpcast/Farcaster
–û—Ç–¥–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SDK –æ—Ç –≤—ã–∑–æ–≤–∞ ready()

üéØ –†–ï–ó–£–õ–¨–¢–ê–¢
–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç Pinball –¥–æ–ª–∂–µ–Ω:

‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å Mini App –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞ iPhone
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Farcaster SDK
‚úÖ –í—ã–∑—ã–≤–∞—Ç—å ready() –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç
‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö